# 🎓 智能作业批改系统 Pro - 用户手册

## 🌟 功能概览

本系统提供高效的作业自动批改功能，支持客观题自动评分和主观题 LLM 智能辅助评分。

1.  **多题型支持**：支持单选、多选、判断、填空（客观题）以及问答、论述（主观题）。
2.  **智能批改**：
    *   **客观题**：基于标准答案自动比对批改。
    *   **主观题**：接入 DeepSeek/OpenAI/Gemini 等大模型，提供拟人化评分和详细评语。
3.  **少样本学习 (Few-Shot)**：支持教师配置典型示例，让 LLM 学习您的评分标准。
4.  **数据可视化**：提供班级得分率分析、总分分布图和详细成绩表。
5.  **历史归档**：支持将成绩保存至数据库，随时回溯历史记录。

---

## 🚀 操作指南

### 第一步：📝 考试配置
在 **"Tab 1: 考试设置"** 页面配置本次考试的结构。

1.  **考试名称**：输入本次考试的唯一标识（如 `2024_期末考试`）。
2.  **题型配置表**：
    *   **识别关键字**：标准答案文件中对应大题的标题（如 `一、单项选择题`）。
    *   **报表列名**：最终成绩表中显示的列名。
    *   **每题分值**：该大题下单题的分数。
    *   **题目数量**：该大题包含的题目总数。
    *   **题型**：**关键步骤！** 请务必正确选择 `客观题` 或 `主观题`。
    *   **点击"✅ 应用配置变更"** 保存设置。

### 第二步：🤖 LLM 配置 (仅主观题需要)
如果考试包含主观题，请在左侧边栏配置：

1.  **API Key**：输入您的 LLM 服务商 API Key。
2.  **Base URL**：API 服务地址（默认提供 DeepSeek 地址）。
3.  **模型名称**：选择使用的模型（如 `deepseek-chat`）。
4.  **点击"🔗 测试连接"**：确保配置正确且网络连通。

### 第三步：📂 答卷上传与批改
在 **"Tab 2: 答卷上传"** 页面上传文件。

#### 1. 上传标准答案
上传一个 `.txt` 文件，**同时包含客观题和主观题的标准答案**。

**文件格式示例：**
```text
一、单项选择题
1. A
2. B
3. C

二、主观题
1. 答案要点包括：(1) xxx; (2) xxx; (3) xxx。
2. 只要提到关键概念 A 和 B 即可得分。
```

#### 2. 上传学生答卷
批量上传学生的 `.txt` 答卷文件。建议文件名使用 `学号_姓名.txt` 格式以便自动识别。

#### 3. 开始批改
点击 **"🚀 开始批量阅卷"**：
*   系统将自动解析答卷。
*   客观题立即出分。
*   主观题将并行调用 LLM 进行批改，请耐心等待进度条完成。
*   **实时进度**：批改过程中，您可以看到正在批改的学生、题目以及 LLM 的实时评分和评语。

---

## 📊 结果查看

### Tab 3: 批改结果
*   **概览**：查看平均分、及格率、最高分等核心指标。
*   **图表**：查看各大题得分率柱状图和总分分布直方图。
*   **详细数据**：交互式表格展示每位学生的详细得分。

### Tab 4: 主观题详情
*   专为教师设计的主观题复盘页面。
*   按学生折叠展示，查看每道主观题的 **学生答案** vs **参考答案**。
*   查看 LLM 给出的 **具体得分** 和 **详细评语/扣分理由**。

### Tab 5: 数据库 & 历史
*   点击 **"💾 保存当前成绩到 DB"** 将本次批改结果归档。
*   在历史记录区域可按考试名称查询和导出过往成绩。

---

## 💡 进阶功能：少样本学习 (Few-Shot)
觉得 LLM 评分不够准确？教它！

1.  在 **"考试设置"** 页面，展开 **"🧠 主观题少样本示例配置"**。
2.  选择一道题目。
3.  如果不满意 LLM 的默认表现，您可以录入一个或多个 **"学生示例答案"** 以及您给出的 **"教师评分"** 和 **"评语"**。
4.  保存后，LLM 在后续批改该题目时，会参考您提供的示例标准进行打分，显著提升准确度。
